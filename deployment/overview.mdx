---
title: "Deployment Overview"
description: "Guide to deploying Voxora to production"
---

## Overview

Voxora can be deployed to various cloud platforms and hosting providers. This guide covers best practices and deployment strategies for both the web application and API server.

## Architecture

A typical production deployment consists of:

```mermaid
graph TB
    A[CDN/Load Balancer] --> B[Web App Instances]
    A --> C[API Server Instances]
    C --> D[(MongoDB Cluster)]
    C --> E[(Redis Cluster)]
    C --> F[File Storage]
    C --> G[Email Service]
```

## Deployment Options

<CardGroup cols={2}>
  <Card title="Vercel" icon="triangle">
    Best for Next.js web app deployment
  </Card>
  <Card title="Railway" icon="train">
    Easy full-stack deployment
  </Card>
  <Card title="AWS" icon="aws">
    Enterprise-grade infrastructure
  </Card>
  <Card title="Digital Ocean" icon="server">
    Simple VPS hosting
  </Card>
</CardGroup>

## Pre-Deployment Checklist

<Steps>
  <Step title="Environment Variables">
    Set all required production environment variables
  </Step>
  <Step title="Database">
    Set up managed MongoDB (Atlas, etc.)
  </Step>
  <Step title="Redis">
    Set up managed Redis (Upstash, etc.)
  </Step>
  <Step title="Email Service">
    Configure SMTP provider (SendGrid, AWS SES)
  </Step>
  <Step title="File Storage">
    Set up S3 or similar for file uploads
  </Step>
  <Step title="Domain & SSL">
    Configure custom domain and SSL certificates
  </Step>
  <Step title="Security">
    Review security settings and secrets
  </Step>
</Steps>

## Build for Production

### Build Both Apps

```bash
npm run build
```

This creates optimized production builds:

- **Web App**: `.next/` directory with static and server files
- **API Server**: Transpiled JavaScript (if using TypeScript)

### Verify Builds

<CodeGroup>

```bash Test web build
cd apps/web
npm run start
```

```bash Test API build
cd apps/api
npm run start
```

</CodeGroup>

## Environment Setup

### Production Environment Variables

<Tabs>
  <Tab title="Web App">
    ```bash
    # API Configuration
    NEXT_PUBLIC_API_URL=https://api.yourdomain.com
    NEXT_PUBLIC_SOCKET_URL=https://api.yourdomain.com
    
    # Widget
    NEXT_PUBLIC_WIDGET_URL=https://cdn.yourdomain.com/widget
    
    # Features
    NEXT_PUBLIC_ENABLE_ANALYTICS=true
    NEXT_PUBLIC_GA_MEASUREMENT_ID=G-XXXXXXXXXX
    
    # Sentry
    NEXT_PUBLIC_SENTRY_DSN=https://...@sentry.io/...
    ```
  </Tab>
  
  <Tab title="API Server">
    ```bash
    # Server
    NODE_ENV=production
    PORT=3002
    
    # Database
    MONGODB_URI=mongodb+srv://user:pass@cluster.mongodb.net/voxora
    
    # Redis
    REDIS_URL=redis://user:pass@redis.host:6379
    
    # JWT
    JWT_SECRET=your-production-secret-here
    
    # CORS
    CORS_ORIGIN=https://app.yourdomain.com
    
    # Email
    SMTP_HOST=smtp.sendgrid.net
    SMTP_PORT=587
    SMTP_USER=apikey
    SMTP_PASS=your-api-key
    EMAIL_FROM=support@yourdomain.com
    ```
  </Tab>
</Tabs>

## Deployment Platforms

### Vercel (Web App)

<Steps>
  <Step title="Install Vercel CLI">
    ```bash
    npm i -g vercel
    ```
  </Step>
  <Step title="Login">
    ```bash
    vercel login
    ```
  </Step>
  <Step title="Deploy">
    ```bash
    cd apps/web
    vercel --prod
    ```
  </Step>
  <Step title="Set Environment Variables">
    Configure in Vercel dashboard or via CLI:
    ```bash
    vercel env add NEXT_PUBLIC_API_URL production
    ```
  </Step>
</Steps>

**vercel.json configuration:**

```json apps/web/vercel.json
{
  "buildCommand": "npm run build",
  "outputDirectory": ".next",
  "framework": "nextjs",
  "env": {
    "NEXT_PUBLIC_API_URL": "@api-url"
  }
}
```

### Railway (Full Stack)

<Steps>
  <Step title="Create Project">
    Sign up at [railway.app](https://railway.app)
  </Step>
  <Step title="Install CLI">
    ```bash
    npm i -g @railway/cli
    railway login
    ```
  </Step>
  <Step title="Deploy">
    ```bash
    railway init
    railway up
    ```
  </Step>
  <Step title="Add Services">
    Add MongoDB and Redis from Railway marketplace
  </Step>
</Steps>

### Docker Deployment

Create production Docker images:

<CodeGroup>

```dockerfile apps/web/Dockerfile
FROM node:18-alpine AS base

# Dependencies
FROM base AS deps
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production

# Builder
FROM base AS builder
WORKDIR /app
COPY . .
COPY --from=deps /app/node_modules ./node_modules
RUN npm run build

# Runner
FROM base AS runner
WORKDIR /app
ENV NODE_ENV production

RUN addgroup --system --gid 1001 nodejs
RUN adduser --system --uid 1001 nextjs

COPY --from=builder /app/public ./public
COPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./
COPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static

USER nextjs
EXPOSE 3000
ENV PORT 3000

CMD ["node", "server.js"]
```

```dockerfile apps/api/Dockerfile
FROM node:18-alpine

WORKDIR /app

# Copy package files
COPY package*.json ./

# Install production dependencies
RUN npm ci --only=production

# Copy source code
COPY . .

# Expose API port
EXPOSE 3002

# Start server
CMD ["npm", "start"]
```

</CodeGroup>

**docker-compose.prod.yml:**

```yaml
version: '3.8'

services:
  web:
    build: ./apps/web
    ports:
      - "3000:3000"
    environment:
      - NEXT_PUBLIC_API_URL=http://api:3002
    depends_on:
      - api

  api:
    build: ./apps/api
    ports:
      - "3002:3002"
    environment:
      - MONGODB_URI=${MONGODB_URI}
      - REDIS_URL=${REDIS_URL}
      - JWT_SECRET=${JWT_SECRET}
    depends_on:
      - mongodb
      - redis

  mongodb:
    image: mongo:latest
    volumes:
      - mongodb_data:/data/db

  redis:
    image: redis:alpine
    volumes:
      - redis_data:/data

volumes:
  mongodb_data:
  redis_data:
```

## Database Setup

### MongoDB Atlas

<Steps>
  <Step title="Create Cluster">
    Sign up at [mongodb.com/cloud/atlas](https://www.mongodb.com/cloud/atlas)
  </Step>
  <Step title="Configure Network Access">
    Add your server IP addresses or allow access from anywhere (0.0.0.0/0)
  </Step>
  <Step title="Create Database User">
    Create a user with read/write permissions
  </Step>
  <Step title="Get Connection String">
    ```
    mongodb+srv://<user>:<password>@cluster.mongodb.net/voxora
    ```
  </Step>
</Steps>

### Redis Cloud (Upstash)

<Steps>
  <Step title="Create Database">
    Sign up at [upstash.com](https://upstash.com)
  </Step>
  <Step title="Get Connection URL">
    ```
    redis://default:<password>@<host>:<port>
    ```
  </Step>
  <Step title="Update Environment">
    Set `REDIS_URL` in your environment variables
  </Step>
</Steps>

## CDN & Static Assets

### Widget Distribution

Host the chat widget on a CDN:

```bash
# Build widget
cd apps/api/public
aws s3 sync widget/ s3://your-bucket/widget/

# Set CloudFront or CDN URL
WIDGET_CDN_URL=https://cdn.yourdomain.com/widget
```

## SSL/TLS Configuration

### Let's Encrypt (Free SSL)

```bash
# Install certbot
sudo apt install certbot python3-certbot-nginx

# Obtain certificate
sudo certbot --nginx -d yourdomain.com -d www.yourdomain.com

# Auto-renewal
sudo certbot renew --dry-run
```

## Load Balancing

### Nginx Configuration

```nginx /etc/nginx/sites-available/voxora
upstream api_servers {
    server 127.0.0.1:3002;
    server 127.0.0.1:3003;
    server 127.0.0.1:3004;
}

server {
    listen 80;
    server_name api.yourdomain.com;
    
    location / {
        proxy_pass http://api_servers;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

## Monitoring & Logging

<CardGroup cols={2}>
  <Card title="Sentry" icon="bug">
    Error tracking and performance monitoring
  </Card>
  <Card title="LogRocket" icon="video">
    Session replay and analytics
  </Card>
  <Card title="DataDog" icon="chart-line">
    Infrastructure and application monitoring
  </Card>
  <Card title="PM2" icon="rotate">
    Process management and monitoring
  </Card>
</CardGroup>

### PM2 Setup

```bash
# Install PM2
npm install -g pm2

# Start API with PM2
pm2 start apps/api/src/index.js --name voxora-api

# Start on system boot
pm2 startup
pm2 save
```

## Scaling Considerations

<CardGroup cols={2}>
  <Card title="Horizontal Scaling" icon="arrows-left-right">
    Run multiple API instances behind a load balancer
  </Card>
  <Card title="Database Sharding" icon="database">
    Shard MongoDB for large datasets
  </Card>
  <Card title="Redis Clustering" icon="server">
    Use Redis cluster for high availability
  </Card>
  <Card title="CDN" icon="globe">
    Serve static assets via CDN
  </Card>
</CardGroup>

## Next Steps

<CardGroup cols={2}>
  <Card
    title="Web App Deployment"
    icon="react"
    href="/deployment/web-app"
  >
    Detailed web app deployment guide
  </Card>
  <Card
    title="API Server Deployment"
    icon="server"
    href="/deployment/api-server"
  >
    Detailed API deployment guide
  </Card>
</CardGroup>
